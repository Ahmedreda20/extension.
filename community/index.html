<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/style.css">
    <title>Community</title>
</head>
<body>
    <header>
        <a href="#">
            <img src="https://i.postimg.cc/WzV4GzdM/man.png" alt="user img">
        </a>
        <div class="bar">
            <input type="checkbox" id="bar">
            <label for="bar">
                <span></span>
                <span></span>
                <span></span>
            </label>

            <div class="user-info">
                <div class="header-user">
                </div>

                <nav>
                    <ul>
                        <li>
                            <p>User name: </p>
                            <a href="" id="username"></a>
                        </li>
                        <li>
                            <p>Email: </p>
                            <a href="" id="emailaddress"></a>
                        </li>
                    </ul>
                </nav>

                <button class="btn-edit">Edit</button>

            </div>
        </div>
    </header>

    <!-- container post -->
    <div class="container">
        <div class="post">

            <!-- header of post -->
            <div class="header">
                <a href="">
                    <img src="https://i.postimg.cc/WzV4GzdM/man.png" alt="admin img">
                    Admin
                </a>
            </div>

            <!-- content of post -->
            <div class="content">
                <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Delectus soluta cupiditate sequi dolor quia asperiores laborum, nihil excepturi expedita minima recusandae sit ipsa magni ex quisquam architecto quae accusantium illum maxime laudantium! Quaerat maxime expedita alias labore sed, aspernatur quae quas quidem, similique nihil adipisci mollitia facere. Eligendi, molestiae nobis!</p>
           <div class="comments-num">
                <input type="checkbox"  id="comment-num">
               <label for="comment-num">
                    comments
                    <svg aria-hidden="true" focusable="false" data-prefix="fad" data-icon="comment-alt-lines" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-comment-alt-lines fa-w-16 fa-7x"><g class="fa-group"><path fill="currentColor" d="M448 0H64A64.06 64.06 0 0 0 0 64v288a64.06 64.06 0 0 0 64 64h96v84a12 12 0 0 0 19.1 9.7L304 416h144a64.06 64.06 0 0 0 64-64V64a64.06 64.06 0 0 0-64-64zM288 264a8 8 0 0 1-8 8H136a8 8 0 0 1-8-8v-16a8 8 0 0 1 8-8h144a8 8 0 0 1 8 8zm96-96a8 8 0 0 1-8 8H136a8 8 0 0 1-8-8v-16a8 8 0 0 1 8-8h240a8 8 0 0 1 8 8z" class="fa-secondary"></path><path fill="currentColor" d="M280 240H136a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h144a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8zm96-96H136a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h240a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8z" class="fa-primary"></path></g></svg>
               </label>
           </div>
            </div>

            <!-- comments container all comments on this post -->
            <div class="comments-container">
                Put a comment and be the first to comment on this post
            </div>

            <!-- footer of post til seting comment -->
            <div class="footer">
                <div class="controls">
                    <input type="text"  id="comment" placeholder="Set comment..">
                    <button class="btn-set-comment">
                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="handshake" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="svg-inline--fa fa-handshake fa-w-20 fa-7x"><path fill="currentColor" d="M434.7 64h-85.9c-8 0-15.7 3-21.6 8.4l-98.3 90c-.1.1-.2.3-.3.4-16.6 15.6-16.3 40.5-2.1 56 12.7 13.9 39.4 17.6 56.1 2.7.1-.1.3-.1.4-.2l79.9-73.2c6.5-5.9 16.7-5.5 22.6 1 6 6.5 5.5 16.6-1 22.6l-26.1 23.9L504 313.8c2.9 2.4 5.5 5 7.9 7.7V128l-54.6-54.6c-5.9-6-14.1-9.4-22.6-9.4zM544 128.2v223.9c0 17.7 14.3 32 32 32h64V128.2h-96zm48 223.9c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zM0 384h64c17.7 0 32-14.3 32-32V128.2H0V384zm48-63.9c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16c0-8.9 7.2-16 16-16zm435.9 18.6L334.6 217.5l-30 27.5c-29.7 27.1-75.2 24.5-101.7-4.4-26.9-29.4-24.8-74.9 4.4-101.7L289.1 64h-83.8c-8.5 0-16.6 3.4-22.6 9.4L128 128v223.9h18.3l90.5 81.9c27.4 22.3 67.7 18.1 90-9.3l.2-.2 17.9 15.5c15.9 13 39.4 10.5 52.3-5.4l31.4-38.6 5.4 4.4c13.7 11.1 33.9 9.1 45-4.7l9.5-11.7c11.2-13.8 9.1-33.9-4.6-45.1z" class=""></path></svg>
                    </button>
                </div>
            </div>


        </div>
    </div>

    <!-- script links and path -->
<script src="./script/mail.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-app.js"></script>
<script type="text/javascript" src="https://cdn.firebase.com/v0/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-analytics.js"></script>
<script  src="https://www.gstatic.com/firebasejs/7.15.1/firebase-firestore.js"></script>
    <script>

  var firebaseConfig = {
    apiKey: "AIzaSyCVJy14NLkR55CQx94oZLOzny8W4T25hYk",
    authDomain: "wallet-extension.firebaseapp.com",
    databaseURL: "https://wallet-extension.firebaseio.com",
    projectId: "wallet-extension",
    storageBucket: "wallet-extension.appspot.com",
    messagingSenderId: "45020600167",
    appId: "1:45020600167:web:06e6ab8091bf06f1f741c2",
    measurementId: "G-2QPEZ5CBGZ"
  };
  firebase.initializeApp(firebaseConfig);
    var db  = firebase.firestore();
var database = firebase.database();

 const set_comment = document.querySelector('.btn-set-comment');
 const comment_container = document.querySelector('.comments-container');
 const comment_txt = document.getElementById('comment');
 set_comment.addEventListener('click' , function(){
     if(comment_txt.value != ""){
            var user = firebase.auth().currentUser;

            if (user) {
 db.collection("users").doc(user.uid).get().then(function(doc){
    name.innerHTML = doc.data().displayName;
    console.log(doc.data().displayName)
 });

    const comment = document.createElement('DIV'); //comment container
    const comment_photo = document.createElement('DIV'); //comment container
    const comment_box = document.createElement('DIV'); //comment container
    const ima = document.createElement('IMG'); //comment container
     const name = document.createElement('H1'); // comment user name
     const comment_content = document.createElement('p'); // comment user content
     const span = document.createElement('SPAN'); // comment user content

        comment_container.style.display = "block"
        comment_container.innerHTML  = '';
        comment_content.innerHTML = comment_txt.value;

        comment_container.appendChild(comment);
        comment.appendChild(comment_photo);
        comment.appendChild(comment_box);
        comment_photo.appendChild(ima);
        comment_box.appendChild(span);
        span.appendChild(name);
        span.appendChild(comment_content);

        ima.src = "https://i.postimg.cc/WzV4GzdM/man.png";

        comment.setAttribute('class' , 'comment');
        comment_box.setAttribute('class' , 'box-comment');
        comment_photo.setAttribute('class' , 'box-comment');
        comment_txt.value ='';
            }
     }else{
         console.log('oops!')
     }



 });

 document.querySelector('#comment-num').addEventListener('click' , function(){
     if(this.checked){
        comment_container.style.height = "300px"
    }else{
        comment_container.style.height = "0"
    }
 });

firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    // User is signed in.
    var displayName = user.displayName;
    var email = user.email;
    var emailVerified = user.emailVerified;
    var photoURL = user.photoURL;
    var isAnonymous = user.isAnonymous;
    var uid = user.uid;
    var providerData = user.providerData;
    console.log(uid)
  } else {
  }
})

var user = firebase.auth().currentUser;

if (user) {
db.collection("users").doc(user.uid).get().then(function(doc){
document.getElementById('username').innerHTML = doc.data().displayName;
document.getElementById('username').innerHTML = doc.data().email;
});
    }
</script>
</body>
</html>